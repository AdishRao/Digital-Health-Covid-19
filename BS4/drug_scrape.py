import requests
from bs4 import BeautifulSoup


headers = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Methods': 'GET',
    'Access-Control-Allow-Headers': 'Content-Type',
    'Access-Control-Max-Age': '3600',
    'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:52.0) Gecko/20100101 Firefox/52.0'
}

codes = [313002,
         483017,
         847630,
         313323,
         203128,
         313782,
         242946,
         212033,
         308460,
         801112,
         897653,
         1049221,
         1232651,
         1361615,
         1665021,
         8782,
         282486,
         359969,
         727575,
         4919,
         142436,
         242969,
         6960,
         312744,
         348719,
         313578,
         1872384,
         66955,
         1860466,
         834127,
         11295,
         745679,
         8640,
         311296,
         104894,
         198052,
         200329,
         283504,
         307746,
         308191,
         5956,
         1010739,
         1049909,
         1049621,
         1437702,
         1649988,
         199211,
         197700,
         198509,
         34322,
         204520,
         828525,
         312515,
         228054,
         307675,
         309710,
         312615,
         312617,
         4850,
         1870650,
         311683,
         314200,
         199362,
         596930,
         835603,
         1745091,
         854235,
         856377,
         876193,
         995258,
         1049633,
         1115005,
         1361048,
         308753,
         309362,
         310132,
         310325,
         1658259,
         1665088,
         312829,
         312935,
         198861,
         283669,
         238212,
         9863,
         52356,
         198741,
         836343,
         311353,
         197361,
         312961,
         311681,
         106346,
         197900,
         199903,
         200031,
         200033,
         205323,
         239209,
         203203,
         308135,
         310429,
         860975,
         198335,
         197805,
         1653202,
         1665093,
         309114,
         314076,
         1427073,
         197518,
         836358,
         197807,
         204441,
         309309,
         197582,
         197806,
         480,
         562508,
         1010671,
         998212,
         1248119,
         860114,
         197943,
         828348,
         197319,
         199163,
         259255,
         617311,
         1151,
         198039,
         200032,
         308136,
         308416,
         309263,
         310431,
         311034,
         311040,
         311041,
         1743704,
         856999,
         857002,
         857005,
         979092,
         996520,
         1047881,
         1659149,
         251872,
         199739,
         238755,
         203192,
         198443,
         828529,
         8410,
         198148,
         199058,
         197435,
         238082,
         238084,
         238100,
         314099,
         615107,
         1795621,
         1010033,
         1116294,
         1361226,
         197884,
         310965,
         314072,
         617310,
         896771,
         905199,
         1807513,
         1010751,
         1190220,
         197589,
         197397,
         313896,
         686924,
         27729,
         197591,
         200251,
         309594,
         314077,
         630208,
         895216,
         310798,
         203211,
         89905,
         647121,
         238154,
         1871155,
         198014,
         200371,
         198116,
         310273,
         310410,
         312507,
         856373,
         866508,
         1049604,
         197901,
         4177,
         310430,
         310432,
         310433,
         310604,
         233603,
         855302,
         855332,
         1807508,
         1797907,
         864706,
         863669,
         310323,
         311028,
         152695,
         245314,
         314216,
         311702,
         312004,
         313570,
         562502,
         749206,
         866094,
         998740,
         197577,
         854977,
         216554,
         311670,
         312940,
         2418,
         313324,
         1116927,
         1659137,
         892589,
         995666,
         1099678,
         1099870,
         701984,
         859437,
         861375,
         866924,
         1234995,
         1738586,
         1722939,
         282402,
         883726,
         351250,
         847230,
         1719646,
         1668238,
         1734203,
         861007,
         993462,
         897745,
         966221,
         617312,
         283100,
         861004,
         861476,
         992460,
         833217,
         318272,
         1807516,
         349332,
         311725,
         6711,
         312055,
         6585,
         403818,
         707329,
         854228,
         896209,
         896228,
         1376336,
         32521,
         198440,
         313773,
         309336,
         309367,
         309509,
         310519,
         636522,
         308048,
         1728999,
         391937,
         142440,
         543546,
         637551,
         1049214,
         200224,
         628953,
         1099687,
         1364435,
         1374744,
         283753,
         310274,
         310384,
         198035,
         486515,
         198051,
         856834,
         1665050,
         2284960,
         866427,
         866436,
         884173,
         897696,
         1012404,
         833528,
         1331,
         892246,
         1663248,
         56466,
         349273,
         349274,
         11248,
         313413,
         866514,
         979485,
         1012396,
         1421151,
         1543069,
         198211,
         904475,
         1364445,
         311289,
         226552,
         311354,
         403884,
         311372,
         966222,
         966220,
         904467,
         993541,
         792582,
         198377,
         197527,
         198191,
         596934,
         992447,
         1358610,
         1648755,
         313096,
         310149,
         828320,
         1726992,
         905395,
         543014,
         854241,
         854876,
         866083,
         1246316,
         1665046,
         312938,
         312941,
         199888,
         197391,
         3565,
         314234,
         203177,
         485032,
         1246319,
         1665060,
         313988,
         197699,
         854248,
         979492,
         313123,
         1367410,
         107129,
         308769,
         1860239,
         313016,
         312122,
         237786,
         1049906,
         314192,
         197444,
         606730,
         891881,
         992438,
         905225,
         1658262,
         966571,
         829734,
         1665212,
         991061,
         1014314,
         312743,
         866511,
         317110,
         1000990,
         540930,
         706943,
         724590,
         1425457,
         1659598,
         1928358,
         310346,
         978006,
         203132,
         311659,
         237656,
         1908,
         199889,
         1992303,
         847239,
         861200,
         198034,
         313566,
         313072,
         313190,
         801136,
         197418,
         314659,
         242761,
         308867,
         830261,
         847627,
         24909,
         309986,
         1736546,
         237648,
         483438,
         483448,
         313585,
         235496,
         854238,
         197803,
         198030,
         283523,
         39954,
         237371,
         860113,
         998442,
         1648110,
         198857,
         856448,
         993470,
         1860463,
         855633,
         7824,
         616487,
         313565,
         646456,
         26344,
         577033,
         1721476,
         1791842,
         283672,
         859747,
         8928,
         197499,
         896762,
         311290,
         351109,
         311048,
         863664,
         895999,
         483450,
         1246314,
         858607,
         854873,
         310015,
         1868494,
         1895,
         347930,
         313532,
         200321,
         966224,
         30236,
         312997,
         484322,
         310385,
         979480,
         308047,
         197944,
         206842,
         199212,
         82010,
         858747,
         311376,
         1721684,
         884308,
         353538,
         1000126,
         197528,
         253182,
         240793,
         239999,
         854255,
         1433873,
         432402,
         885213,
         197735,
         1359363,
         197581,
         1552002,
         359296,
         1189640,
         197797,
         197580,
         1049611,
         1116635,
         312830,
         891888,
         11516,
         239998,
         240377,
         1790219,
         90670.0,
         90686.0]

result = {}
remainder = []


for code in codes:
    try:
        url = "https://bioportal.bioontology.org/ontologies/RXNORM?p=classes&conceptid=" + str(code)
        req = requests.get(url, headers)
        soup = BeautifulSoup(req.content, 'html.parser')
        # print(soup.prettify())

        result[code] = soup.find("span", class_="prefLabel").text

    except:
        remainder.append(code)

#for k, v in result.items():
#    print(k, "\t:\t", v)

for i in remainder:
    print(i)
